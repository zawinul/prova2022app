exports.handler = async (event, context) => {
	let body = '';
	let headers = {};
	let statusCode = '200';


    // if (!event.requestContext || !event.requestContext.http)
    //     return onError(500, 'bad request');
    
	var method = event.requestContext.http.method;

    if (method.toUpperCase()=='OPTIONS') {
        var origin = '*';
        if (event.headers && event.headers.origin)
            origin = event.headers.origin;
    
        console.log('origin='+origin);        
		headers = {
			'Content-Type': 'application/json',
			"Access-Control-Allow-Origin": origin,
			"Access-Control-Allow-Methods": "OPTIONS,POST,GET",
			'Access-Control-Allow-Headers': 'Content-Type, Origin, Access-Control-Request-Method, Access-Control-Allow-Origin,Authorization',
			'Access-Control-Allow-Credentials': true
			
		};
	}
	else {
		body = JSON.stringify({
			msg: method + ' '+event.requestContext.http.path+" not found",
			event
		});
	}
	return  {
		statusCode,
		body,
		headers
	};
};
